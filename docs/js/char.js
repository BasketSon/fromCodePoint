let symbolFontSize=1.8;const Char=function(t){this.codePoint=t,this.size=symbolFontSize,this.utfSymbol=String.fromCodePoint(t),this.node=this.createNode()};Char.prototype.createNode=function(){let t=document.createElement("button");return t.classList.add("char"),t.setAttribute("title",`code is ${this.codePoint}`),t.textContent=this.utfSymbol,t.style.fontSize=`${this.size}em`,t.addEventListener("click",function(t){playClickSound();let e=t.shiftKey?`\\u${padToFour(decToHex(this.textContent.codePointAt(0)))}`:this.textContent;typeCopiedSymbol(e),navigator.clipboard.writeText(e).then(()=>{console.log(e+" скопировано в буфер")}).catch(t=>{console.log("Ошибка",t)})}),t},Char.prototype.render=function(t){t.appendChild(this.node)},Char.prototype.resize=function(t){this.size=t?this.size<4?this.size+.2:4:this.size>1?this.size-.2:1,this.node.style.fontSize=`${this.size}em`,symbolFontSize=this.size};let lastSetEnd,lastSetStart,charList=[];function createSet(t,e){let o=new DocumentFragment;charList=[];for(let n=t;n<=e;n++){let t=new Char(n);charList.push(t),t.render(o)}return lastSetStart=t,lastSetEnd=e,o}const charsField=document.querySelector(".chars");function drawSet(t,e){charsField.appendChild(createSet(t,e))}function removeChars(){document.querySelectorAll(".char").forEach(function(t){t.remove()})}function newSet(){let t=getButtonsAmount()?getButtonsAmount():300;removeChars();let e=+prompt("С индекса",lastSetEnd||0);drawSet(e,+prompt("По индекс",e+t))}function nextSet(){let t=getButtonsAmount();removeChars();let e=lastSetEnd||0;drawSet(e,t?e+t:e+300)}function prevSet(){if(!lastSetStart)return!1;let t=getButtonsAmount();removeChars(),drawSet(lastSetStart-t>0?lastSetStart-t:0,lastSetStart)}function getButtonsAmount(){let t=charsField.offsetHeight*charsField.offsetWidth,e=document.querySelectorAll(".char:nth-child(3n)"),o=Array.from(e).reduce((t,e)=>t+(e.offsetHeight+20)*(e.offsetWidth+25),0)/e.length;return Math.floor(t/o)}let newSetButton=document.querySelector(".new-set");function decToHex(t){return Number(t).toString(16)}function padToFour(t){return parseInt(t,16)<=9999?`000${t}`.substr(-4):t}newSetButton.addEventListener("click",newSet),window.addEventListener("keydown",function(t){switch(t.which){case 68:case 39:nextSet();break;case 65:case 37:prevSet();break;case 87:case 38:charList.forEach(function(t){t.resize("up")});break;case 83:case 40:charList.forEach(function(t){t.resize()})}});let clickAudio=new Audio;function playClickSound(){let t=clickAudio.cloneNode();t.currentTime=.2,t.volume=.2,t.play(),t.loop=!1}clickAudio.src="../media/click.mp3",clickAudio.preload="auto";const log=document.querySelector(".log");function typeCopiedSymbol(t){log.textContent+=`${t} `,log.textContent.split(" ").length>30&&(log.textContent=log.textContent.split(" ").slice(-30).join(" "))}